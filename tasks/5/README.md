# 5 Deploying to GitHub Pages

<details>
<summary>Navigation</summary>

1. ~~[Creating a workflow](../1/README.md)~~
2. ~~[Building code in a workflow](../2/README.md)~~
3. ~~[Running multiple jobs in parallel](../3/README.md)~~
4. ~~[Running jobs in sequence](../4/README.md)~~
5. **Deploying to GitHub Pages** (this task)
6. [Using other events to run workflows](../6/README.md)

</details>

GitHub Pages is GitHub's built-in static site hosting.
It's not very often used in production, but it's great for hosting things like documentation, blogs, or even your own website.
Even though it's not used that often, it's still a great way to learn how to deploy to a cloud service.

## 5.1 Configuring GitHub Pages

To deploy to GitHub Pages from GitHub Actions, we first need to configure the repository.

1. Go to the repository settings on <https://github.com/[your-username]/gh-actions-workshop/settings/pages>
1. Under "Build and deployment" -> "Source", select "GitHub Actions" (currently in beta)

## 5.2 Creating a workflow that deploys to GitHub Pages

Now that we've configured GitHub Pages, we can create a workflow that deploys to it.
Let's create a new workflow file called `deploy.yml` in the `.github/workflows` directory.
The new workflow should be triggered on `push` to the `main` branch, as this is the only branch we _know_ works.

We need to set a few permissions to be able to read the repository and deploy to GitHub Pages:

| Permission        | Description                     |
| ----------------- | ------------------------------- |
| `contents: read`  | To read the repository contents |
| `pages: write`    | To deploy to GitHub Pages       |
| `id-token: write` | To create a deployment status   |

1. Create a new job called `deploy` that runs on `ubuntu-latest`
1. In the steps, check out the code, install dependencies and build the project as before
1. To be able to deploy, we use [`actions/configure-pages`](https://github.com/actions/configure-pages), [`actions/upload-pages-artifact`](https://github.com/actions/upload-pages-artifact) and [`actions/deploy-pages`](https://github.com/actions/deploy-pages):

   ```yaml
   - name: Setup Pages
     uses: actions/configure-pages@v3
   - name: Upload artifact
     uses: actions/upload-pages-artifact@v2
     with:
       # Upload the `dist` folder, which was generated by `npm run build`
       path: "./dist"
   - name: Deploy to GitHub Pages
     id: deployment
     uses: actions/deploy-pages@v2
   ```

After running this workflow (on the `main` branch), you should be able to see the webpage on <https://[your-username].github.io/gh-pages-workshop> üòç
Now let's learn about other events in [task 6](../6/README.md)!
